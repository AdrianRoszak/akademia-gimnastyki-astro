---
import type { HomePage } from '../../data/digests/digest-home-page-data'
import Container from '../atoms/Container.astro'
import Heading from '../molecules/Heading.astro'
import CampsGrid from '../organisms/CampsGrid.astro'

const { title, lead, camps } = Astro.props.data as HomePage['camps']
---

<section class="section-camps">
  <Container>
    <div class="heading-wrapper">
      <Heading as="h1" size="xl" text={title} />
      <p>{lead}</p>
    </div>
    <CampsGrid data={camps} />
  </Container>
</section>

<style>
  .section-camps {
    position: relative;
    margin: 3rem 0;
    padding: 3rem 0 6rem;

    &::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      clip-path: polygon(100% 100%, 100% 100%, 100% 100%);
    background: var(--weirdo-color-accent-3);
    z-index: -1;
    transition: clip-path 1.5s ease-in-out;
  }

  &.in-view::after {
    clip-path: polygon(100% 0%, 0% 100%, 100% 100%);
  }
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
  const section = document.querySelector(".section-camps");

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        section.classList.add("in-view");
      }
    });
  });

  observer.observe(section);
});
</script>